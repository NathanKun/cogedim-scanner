<div id="bigmap">
  <google-map
    height="100%"
    width="100%"
    [center]="center"
    [options]="options"
    [zoom]="zoom">
    <map-marker
      #markerElem
      *ngFor="let marker of markerConfigs"
      [position]="marker.position"
      [label]="marker.label"
      [title]="marker.title"
      [options]="marker.options"
      (mapClick)="markerClick(markerElem)">
    </map-marker>
    <map-info-window [options]="infoWindowConfig">
      <mat-card class="map-info px-0" *ngIf="infoWindowLoaded; else loadingTemplate">
        <mat-card-header>
          <mat-card-title>{{infoWindowBigMapPinDetail.programName}}</mat-card-title>
          <mat-card-subtitle>{{infoWindowBigMapPinDetail.addressLocality}} {{infoWindowBigMapPinDetail.postalCode}}</mat-card-subtitle>
        </mat-card-header>
        <a [href]="infoWindowBigMapPinDetail.url" target="_blank">
          <img class="map-info-img"
               [lazyLoad]="infoWindowBigMapPinDetail.imgUrl"
               src="https://dummyimage.com/327x188/eeeeee/eeeeee.jpg"
               [alt]="infoWindowBigMapPinDetail.programName"/>
        </a>
        <mat-card-content>
          <div class="p-2" [innerHTML]="infoWindowBigMapPinDetail.summary"></div>
          <div class="p-2" [innerHTML]="infoWindowBigMapPinDetail.deliveryInfo"></div>
        </mat-card-content>
        <mat-card-actions>
          <a [href]="infoWindowBigMapPinDetail.url" target="_blank" mat-icon-button>
            <mat-icon>web</mat-icon>
          </a>
          <button *ngIf="!infoWindowBigMapPinDetail.hid"
                  (click)="setPinHid(infoWindowBigMapPinDetail, true)"
                  mat-icon-button>
            <mat-icon fontSet="material-icons-outlined">remove_red_eye</mat-icon>
          </button>
          <button *ngIf="infoWindowBigMapPinDetail.hid"
                  (click)="setPinHid(infoWindowBigMapPinDetail, false)"
                  mat-icon-button>
            <mat-icon>remove_red_eye</mat-icon>
          </button>
        </mat-card-actions>
      </mat-card>
      <ng-template #loadingTemplate>
        loading...
      </ng-template>
    </map-info-window>
  </google-map>
  <div #changeHideStateButton class="d-none">
    <button (click)="changeHideState()" mat-flat-button class="change-state-button p-0">
      <ng-container *ngIf="hideHidPins; else hideUnhidPins">
        <mat-icon>remove_red_eye</mat-icon>
      </ng-container>
      <ng-template #hideUnhidPins>
        <mat-icon fontSet="material-icons-outlined">remove_red_eye</mat-icon>
      </ng-template>
    </button>
  </div>
</div>
